<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Qualifi — Assessment (All‑in‑One)</title>
  <meta name="description" content="Single-file SPA combining landing page, wizard, and thank-you." />
  <style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

:root {

  /* Colors */
  --ink: #1a202c;
  --bg: #f8fafc;
  --surface: #ffffff;
  --muted: #64748b;
  --line: #e2e8f0;
  --brand: #1e3a8a;
  --accent: #235f6d;
  --navy: #0f172a;
  --navy-light: #1e293b;
  --highlight: #06d6a0;
  --red: #dc2626;

  /* Font Family */
  --font-family: Inter, sans-serif;

  /* Type */

  --display-xlg-size: 3.05rem;


  --display-lg-size: 39.06px;
  --display-lg-weight: 800;
  --display-lg-line-height: 1.47;
  --display-lg-letter-spacing: 0.023em;

  --display-md-size: 34.94px;
  --display-md-weight: 800;
  --display-md-line-height: 1.47;
  --display-md-letter-spacing: 0.023em;

  --h1-size: 31.25px;
  --h1-weight: 700;
  --h1-line-height: 1.47;
  --h1-letter-spacing: 0.03em;

  --h2-size: 25px;
  --h2-weight: 600;
  --h2-line-height: 1.47;
  --h2-letter-spacing: 0.03em;

  --h3-size: 22.36px;
  --h3-weight: 600;
  --h3-line-height: 1.52;
  --h3-letter-spacing: 0.038em;

  --h4-size: 20px;
  --h4-weight: 500;
  --h4-line-height: 1.52;
  --h4-letter-spacing: 0.038em;

  --h5-size: 18.91px;
  --h5-weight: 500;
  --h5-line-height: 1.52;
  --h5-letter-spacing: 0.045em;

  --h6-size: 17.89px;
  --h6-weight: 500;
  --h6-line-height: 1.52;
  --h6-letter-spacing: 0.045em;

  --body-xl-size: 16.92px;
  --body-xl-weight: 400;
  --body-xl-line-height: 1.52;
  --body-xl-letter-spacing: 0.045em;

  --body-size: 16px;
  --body-weight: 400;
  --body-line-height: 1.52;
  --body-letter-spacing: 0.045em;

  --body-sm-size: 14.31px;
  --body-sm-weight: 400;
  --body-sm-line-height: 1.57;
  --body-sm-letter-spacing: 0.045em;

  --caption-lg-size: 12.8px;
  --caption-lg-weight: 400;
  --caption-lg-line-height: 1.57;
  --caption-lg-letter-spacing: 0.045em;

  --caption-size: 11.45px;
  --caption-weight: 400;
  --caption-line-height: 1.57;
  --caption-letter-spacing: 0.045em;

  --caption-sm-size: 10.24px;
  --caption-sm-weight: 300;
  --caption-sm-line-height: 1.57;
  --caption-sm-letter-spacing: 0.045em;

  --overline-size: 9.16px;
  --overline-weight: 500;
  --overline-line-height: 1.57;
  --overline-letter-spacing: 0.045em;

  
  /* Layout */
  --radius: 0px;
  --dock-h: 100px;
  
  /* Grid  */
  --grid-gap: 1.25rem;
  --container-padding: 1.5rem;

  /* Spacing */
  --space-xs: 0.25rem;   /* 4px */
  --space-s: 0.5rem;     /* 8px */
  --space-m: 1rem;       /* 16px */
  --space-l: 1.5rem;     /* 24px */
  --space-xl: 2rem;      /* 32px */
  --space-2xl: 2.5rem;   /* 40px */
  --space-3xl: 3rem;     /* 48px */
  --space-4xl: 4rem;     /* 64px */
  --space-5xl: 5rem;     /* 80px */
  --space-6xl: 6rem;     /* 96px */
}



/* Margin */
.m-xs { margin: var(--space-xs); }
.m-s { margin: var(--space-s); }
.m-m { margin: var(--space-m); }
.m-l { margin: var(--space-l); }
.m-xl { margin: var(--space-xl); }
.m-2xl { margin: var(--space-2xl); }
.m-3xl { margin: var(--space-3xl); }
.m-4xl { margin: var(--space-4xl); }
.m-5xl { margin: var(--space-5xl); }
.m-6xl { margin: var(--space-6xl); }

/* Margin top */
.mt-xs { margin-top: var(--space-xs); }
.mt-s { margin-top: var(--space-s); }
.mt-m { margin-top: var(--space-m); }
.mt-l { margin-top: var(--space-l); }
.mt-xl { margin-top: var(--space-xl); }
.mt-2xl { margin-top: var(--space-2xl); }
.mt-3xl { margin-top: var(--space-3xl); }
.mt-4xl { margin-top: var(--space-4xl); }
.mt-5xl { margin-top: var(--space-5xl); }
.mt-6xl { margin-top: var(--space-6xl); }

/* Margin bottom */
.mb-xs { margin-bottom: var(--space-xs); }
.mb-s { margin-bottom: var(--space-s); }
.mb-m { margin-bottom: var(--space-m); }
.mb-l { margin-bottom: var(--space-l); }
.mb-xl { margin-bottom: var(--space-xl); }
.mb-2xl { margin-bottom: var(--space-2xl); }
.mb-3xl { margin-bottom: var(--space-3xl); }
.mb-4xl { margin-bottom: var(--space-4xl); }
.mb-5xl { margin-bottom: var(--space-5xl); }
.mb-6xl { margin-bottom: var(--space-6xl); }

/* Margin left/right */
.mx-xs { margin-left: var(--space-xs); margin-right: var(--space-xs); }
.mx-s { margin-left: var(--space-s); margin-right: var(--space-s); }
.mx-m { margin-left: var(--space-m); margin-right: var(--space-m); }
.mx-l { margin-left: var(--space-l); margin-right: var(--space-l); }
.mx-xl { margin-left: var(--space-xl); margin-right: var(--space-xl); }
.mx-2xl { margin-left: var(--space-2xl); margin-right: var(--space-2xl); }
.mx-3xl { margin-left: var(--space-3xl); margin-right: var(--space-3xl); }
.mx-4xl { margin-left: var(--space-4xl); margin-right: var(--space-4xl); }
.mx-5xl { margin-left: var(--space-5xl); margin-right: var(--space-5xl); }
.mx-6xl { margin-left: var(--space-6xl); margin-right: var(--space-6xl); }

/* Margin top/bottom */
.my-xs { margin-top: var(--space-xs); margin-bottom: var(--space-xs); }
.my-s { margin-top: var(--space-s); margin-bottom: var(--space-s); }
.my-m { margin-top: var(--space-m); margin-bottom: var(--space-m); }
.my-l { margin-top: var(--space-l); margin-bottom: var(--space-l); }
.my-xl { margin-top: var(--space-xl); margin-bottom: var(--space-xl); }
.my-2xl { margin-top: var(--space-2xl); margin-bottom: var(--space-2xl); }
.my-3xl { margin-top: var(--space-3xl); margin-bottom: var(--space-3xl); }
.my-4xl { margin-top: var(--space-4xl); margin-bottom: var(--space-4xl); }
.my-5xl { margin-top: var(--space-5xl); margin-bottom: var(--space-5xl); }
.my-6xl { margin-top: var(--space-6xl); margin-bottom: var(--space-6xl); }

/* Padding utilities */
.p-xs { padding: var(--space-xs); }
.p-s { padding: var(--space-s); }
.p-m { padding: var(--space-m); }
.p-l { padding: var(--space-l); }
.p-xl { padding: var(--space-xl); }
.p-2xl { padding: var(--space-2xl); }
.p-3xl { padding: var(--space-3xl); }
.p-4xl { padding: var(--space-4xl); }
.p-5xl { padding: var(--space-5xl); }
.p-6xl { padding: var(--space-6xl); }

/* Padding top */
.pt-xs { padding-top: var(--space-xs); }
.pt-s { padding-top: var(--space-s); }
.pt-m { padding-top: var(--space-m); }
.pt-l { padding-top: var(--space-l); }
.pt-xl { padding-top: var(--space-xl); }
.pt-2xl { padding-top: var(--space-2xl); }
.pt-3xl { padding-top: var(--space-3xl); }
.pt-4xl { padding-top: var(--space-4xl); }
.pt-5xl { padding-top: var(--space-5xl); }
.pt-6xl { padding-top: var(--space-6xl); }

/* Padding bottom */
.pb-xs { padding-bottom: var(--space-xs); }
.pb-s { padding-bottom: var(--space-s); }
.pb-m { padding-bottom: var(--space-m); }
.pb-l { padding-bottom: var(--space-l); }
.pb-xl { padding-bottom: var(--space-xl); }
.pb-2xl { padding-bottom: var(--space-2xl); }
.pb-3xl { padding-bottom: var(--space-3xl); }
.pb-4xl { padding-bottom: var(--space-4xl); }
.pb-5xl { padding-bottom: var(--space-5xl); }
.pb-6xl { padding-bottom: var(--space-6xl); }

/* Padding left/right */
.px-xs { padding-left: var(--space-xs); padding-right: var(--space-xs); }
.px-s { padding-left: var(--space-s); padding-right: var(--space-s); }
.px-m { padding-left: var(--space-m); padding-right: var(--space-m); }
.px-l { padding-left: var(--space-l); padding-right: var(--space-l); }
.px-xl { padding-left: var(--space-xl); padding-right: var(--space-xl); }
.px-2xl { padding-left: var(--space-2xl); padding-right: var(--space-2xl); }
.px-3xl { padding-left: var(--space-3xl); padding-right: var(--space-3xl); }
.px-4xl { padding-left: var(--space-4xl); padding-right: var(--space-4xl); }
.px-5xl { padding-left: var(--space-5xl); padding-right: var(--space-5xl); }
.px-6xl { padding-left: var(--space-6xl); padding-right: var(--space-6xl); }

/* Padding top/bottom */
.py-xs { padding-top: var(--space-xs); padding-bottom: var(--space-xs); }
.py-s { padding-top: var(--space-s); padding-bottom: var(--space-s); }
.py-m { padding-top: var(--space-m); padding-bottom: var(--space-m); }
.py-l { padding-top: var(--space-l); padding-bottom: var(--space-l); }
.py-xl { padding-top: var(--space-xl); padding-bottom: var(--space-xl); }
.py-2xl { padding-top: var(--space-2xl); padding-bottom: var(--space-2xl); }
.py-3xl { padding-top: var(--space-3xl); padding-bottom: var(--space-3xl); }
.py-4xl { padding-top: var(--space-4xl); padding-bottom: var(--space-4xl); }
.py-5xl { padding-top: var(--space-5xl); padding-bottom: var(--space-5xl); }
.py-6xl { padding-top: var(--space-6xl); padding-bottom: var(--space-6xl); }

/* Gap utilities for flexbox/grid */
.gap-xs { gap: var(--space-xs); }
.gap-s { gap: var(--space-s); }
.gap-m { gap: var(--space-m); }
.gap-l { gap: var(--space-l); }
.gap-xl { gap: var(--space-xl); }
.gap-2xl { gap: var(--space-2xl); }
.gap-3xl { gap: var(--space-3xl); }
.gap-4xl { gap: var(--space-4xl); }
.gap-5xl { gap: var(--space-5xl); }
.gap-6xl { gap: var(--space-6xl); }

* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: var(--surface);
  color: var(--ink);
  font-family: var(--font-family);
  font-size: var(--body-size);
  font-weight: var(--body-weight);
  line-height: var(--body-line-height);
  letter-spacing: var(--body-letter-spacing);
  overflow-x: hidden;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  background: radial-gradient(1200px 800px at 80% -10%, rgba(59,130,246,.10), transparent 60%),
              radial-gradient(900px 600px at -10% 20%, rgba(37,99,235,.08), transparent 55%);
}

a {
  color: inherit;
  text-decoration: none;
}

/* Type */

h1, .h1 {
  font-size: var(--h1-size);
  font-weight: var(--h1-weight);
  color: var(--ink);
  margin: 1.5rem 0 1rem;
  letter-spacing: var(--h1-letter-spacing);
  text-align: left;
  line-height: var(--h1-line-height);
}

/* Mobile header adjustments */
@media (max-width: 768px) {
  h1, .h1 {
    font-size: var(--h2-size);
    line-height: 1.3;
  }
}

.h2 {
  font-size: var(--h2-size);
  font-weight: var(--h2-weight);
  margin: 0 0 0.75rem;
  color: var(--ink);
  text-align: left;
  line-height: var(--h2-line-height);
  letter-spacing: var(--h2-letter-spacing);
}

/* Mobile h2 adjustments */
@media (max-width: 768px) {
  .h2 {
    font-size: var(--h3-size);
    line-height: 1.4;
  }
}

.lead {
  font-size: var(--body-xl-size);
  font-weight: var(--body-xl-weight);
  color: var(--muted);
  text-align: left;
  margin: 0 0 1.5rem;
  line-height: var(--body-xl-line-height);
  letter-spacing: var(--body-xl-letter-spacing);
  max-width: 100%;
}

.section-sub {
  font-size: var(--body-size);
  font-weight: var(--body-weight);
  color: var(--ink);
  margin: 0;
  text-align: left;
  line-height: var(--body-line-height);
  letter-spacing: var(--body-letter-spacing);
}

/* Components */

.section {
  max-width: 866px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
}

.section.narrow {
  max-width: 866px;
  padding: 2rem 1.5rem;
}

/* Grid */

.grid {
  display: grid;
  gap: var(--grid-gap);
  width: 100%;
}

/* Mobile: 4 columns (≤768px) */
.grid-4 { grid-template-columns: repeat(4, 1fr); }
.col-1 { grid-column: span 1; }
.col-2 { grid-column: span 2; }
.col-3 { grid-column: span 3; }
.col-4 { grid-column: span 4; }

/* Tablet: 8 columns (769px-1024px) */
@media (min-width: 769px) {
  .grid-8 { grid-template-columns: repeat(8, 1fr); }
  .col-5 { grid-column: span 5; }
  .col-6 { grid-column: span 6; }
  .col-7 { grid-column: span 7; }
  .col-8 { grid-column: span 8; }
}

/* Desktop: 12 columns (≥1025px) */
@media (min-width: 1025px) {
  .grid-12 { grid-template-columns: repeat(12, 1fr); }
  .col-9 { grid-column: span 9; }
  .col-10 { grid-column: span 10; }
  .col-11 { grid-column: span 11; }
  .col-12 { grid-column: span 12; }
}


/* Mobile: Stack single column */
.grid.cols-3,
.grid.cols-4 {
  grid-template-columns: 1fr; 
}

/* Tablet breakpoint: 8 columns */
@media (min-width: 769px) {
  .grid.cols-3 {
    grid-template-columns: repeat(8, 1fr);
  }
  .grid.cols-3 > * {
    grid-column: span 4; 
  }
  
  .grid.cols-4 {
    grid-template-columns: repeat(8, 1fr);
  }
  .grid.cols-4 > * {
    grid-column: span 2; 
  }
}

/* Desktop breakpoint: 12 columns */
@media (min-width: 1025px) {
  .grid.cols-3 {
    grid-template-columns: repeat(12, 1fr);
  }
  .grid.cols-3 > * {
    grid-column: span 4; 
  }
  
  .grid.cols-4 {
    grid-template-columns: repeat(12, 1fr);
  }
  .grid.cols-4 > * {
    grid-column: span 3; 
}

/* Blocks */

.card {
  background: #fff;
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: 1rem;
}


.card.row {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: 1rem;
}

.callout-box {
  margin: 0;
  padding: 0;
  flex: 1;
}

.callout-box strong {
  display: block;
  margin: 0 0 0.5rem 0;
}

.callout-box .section-sub {
  margin: 0;
}

.kicker {
  display: inline-block;
  font-size: var(--caption-lg-size);
  font-weight: var(--caption-lg-weight);
  letter-spacing: var(--caption-lg-letter-spacing);
  line-height: var(--caption-lg-line-height);
  text-transform: uppercase;
  color: var(--highlight);
  background: transparent;
  border: 1px solid var(--highlight);
  border-radius: 0px;
  padding: 0.25rem 0.75rem;
  margin-bottom: 0.5rem;
  text-align: center;
  align-self: flex-start;
}

.list {
  margin: 0;
  padding-left: 18px;
}

.list li {
  margin: 6px 0;
}

/* Icons */

.row {
  display: flex;
  gap: 1rem;
  align-items: flex-start;
  height: fit-content;
}

.ic {
  flex: 0 0 auto;
  width: 3rem;
  height: 3rem;
  border-radius: 0px;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(6, 214, 160, 0.1);
}

.ic svg {
  width: 1.5rem;
  height: 1.5rem;
  opacity: 1;
  color: var(--highlight);
}


#services-bg .ic,
#why-bg .ic {
  background: rgba(6, 214, 160, 0.1);
}

#services-bg .ic svg,
#why-bg .ic svg {
  color: var(--highlight);
}

/* Buttons */

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 1rem 2rem;
  border-radius: var(--radius);
  border: 1px solid rgba(255, 255, 255, 0.2);
  background: var(--navy);
  color: var(--surface);
  font-size: var(--body-size);
  font-weight: var(--body-weight);
  line-height: var(--body-line-height);
  letter-spacing: var(--body-letter-spacing);
  cursor: pointer;
  width: auto;
  transition: all 0.2s ease;
}

@media (max-width: 640px) {
  .btn {
    width: 100%;
  }
}

.btn.primary {
  background: var(--navy);
  /*border-color: var(--brand);*/
  color: #fff;
  /*box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);*/
}

.btn.primary:hover {
  background: var(--accent);
  border-color: var(--accent);
  transform: translateY(-1px);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

.btn.ghost {
  background: transparent;
  color: var(--muted);
  border-color: var(--line);
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-wrapper {
  display: flex;
  column-gap: 1rem;
}

/* Form */

.input, .select {
  width: 100%;
  padding: var(--space-m);
  border-radius: var(--radius);
  border: 1px solid var(--line);
  background: var(--surface);
  color: var(--ink);
  font-size: var(--body-size);
  min-height: 48px;
  outline: none;
  transition: border 0.2s, box-shadow 0.2s;
}

.input:focus, .select:focus {
  border-color: var(--brand);
  box-shadow: 0 0 0 2px rgba(30, 58, 138, 0.2);
}

/* Form Options */
.options {
  display: flex;
  flex-direction: column;
  gap: var(--space-s);
}

.option {
  display: flex;
  align-items: center;
  gap: var(--space-m);
  width: 100%;
  padding: 1.25rem;
  border: 1px solid var(--line);
  background: #f8f9fa;
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.2s ease;
}

.option:hover {
  border-color: var(--brand);
}

.option:active {
  transform: translateY(1px);
}

.option .mark {
  width: 22px;
  height: 22px;
  border-radius: 0px;
  border: 2px solid var(--line);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: var(--caption-lg-size);
  color: var(--ink);
  background: var(--surface);
  flex: 0 0 auto;
}

.option .icon {
  width: 18px;
  height: 18px;
  flex: 0 0 auto;
  opacity: 0.8;
}

.option.active {
  border-color: var(--brand);
  background: linear-gradient(0deg, rgba(30, 58, 138, 0.06), rgba(30, 58, 138, 0.06));
}

.option.active .mark {
  border-color: var(--brand);
  background: var(--brand);
}

.option .label {
  flex: 1;
  font-weight: 600;
  color: var(--ink);
  font-size: var(--body-xl-size);
  text-align: left;
}

/* Form Error Styles */
.input.error, .select.error {
  border-color: #dc2626 !important;
  box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.12) !important;
}

.error-text {
  font-size: var(--caption-lg-size);
  color: #b91c1c;
  margin-top: var(--space-xs);
}

/* Header Nav */

.brandbar {
  position: sticky;
  top: 0;
  z-index: 40;
  background: var(--navy);
  transition: background 0.3s ease, backdrop-filter 0.3s ease;
}

.brandbar.scrolled {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.brandbar-inner {
  max-width: 866px;
  margin: 0 auto;
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 14px;
}

.brand-actions {
  margin-left: auto;
  display: flex;
  gap: 10px;
  align-items: center;
}

.brand-logo {
  margin-block: auto;
  display: block;
  color: var(--surface);
}

.logo-img {
  height: 51px;
  width: auto;
  max-width: 170px;
  object-fit: contain;
  margin-top: 0.125rem;
}

/* Responsive logo */
@media (max-width: 768px) {
  .logo-img {
    height: 43px;
    max-width: 136px;
  }
}

@media (max-width: 480px) {
  .logo-img {
    height: 34px;
    max-width: 119px;
  }
}

.header-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 1.5rem;
  border-radius: var(--radius);
  border: 1px solid var(--accent);
  background: var();
  color: var(--surface);
  font-weight: 400;
  cursor: pointer;
  font-size: 0.875rem;
  max-width: 250px;
  transition: all 0.2s ease;
}

/* Progress Bar */

.progress {
  position: sticky;
  top: 0;
  z-index: 30;
  height: 4px;
  background: #e9eef9;
}

.progress-bar {
  height: 100%;
  width: 0;
  background: linear-gradient(90deg, var(--navy), var(--highlight));
  transition: width 0.25s ease;
}

/* Hero */

.hero {
  height: 100vh;
  width: 100%;
  background-color: transparent;
  background-image: url('https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  margin-top: -68px;
  padding-top: 0;
  padding-bottom: 0;
  position: relative;
  display: flex;
  align-items: flex-end;
}

/* Hero blur */
.hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(8, 12, 22, 0.7);
  backdrop-filter: blur(2px);
  z-index: 1;
}

.hero-min {
  max-width: 866px;
  margin: 0 auto;
  padding: 2rem 1.5rem 4rem;
  position: relative;
  z-index: 2;
  width: 100%;
}

.hero-title {
  font-size: var(--display-md-size);/* clamp(2rem, 10vw, 6rem);*/
  font-weight: 200;
  letter-spacing: var(--display-lg-letter-spacing);
  margin: 1rem 0;
  color: var(--surface);
  text-align: left;
  line-height: 1;
  white-space: nowrap;
  width: 100%;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
}


.hero-sub {
  font-size: var(--body-lg-size);
  font-weight: 200;   /*var(--body-lg-weight);*/
  color: rgba(255, 255, 255, 0.9);
  text-align: left;
  margin: 1rem 0 2rem;
  max-width: 90%;
  line-height: var(--body-lg-line-height);
  letter-spacing: var(--body-lg-letter-spacing);
}

.hero-cta {
  display: flex;
  gap: 1rem;
  justify-content: flex-start;
  flex-wrap: nowrap;
  margin-top: 3rem;
}

.kicker-hero {
  display: inline-block;
  font-size: 12px;
  font-weight: 100;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  color: #fff;
  background: #282b3000;
  border: 1px solid var(--highlight);
  border-radius: 0px;
  padding: 4px 8px;
  margin-bottom: 8px;
  max-width: 5.5rem;
  text-align: center;
}

.trust {
  display: none;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 14px;
}

.trust .chip {
  background: rgba(6, 214, 160, 0.1);
  border: 1px solid var(--highlight);
  padding: 6px 10px;
  border-radius: 0px;
  font-weight: 600;
  color: var(--highlight);
  font-size: 12px;
}

/* Main */

/* Alternating section backgrounds */

#services-bg, #why-bg {
  background: #f6f6f6;
}

#cta-bg {
  background: var(--ink);
}

/* Section overides */
.h2 {
  text-align: left;
}

.lead {
  text-align: left;
}

.ic {
  color: #235f6d;
}

/* Dark section text colors */
#services-bg .h2,
#services-bg .lead,
#services-bg .card strong, 
#services-bg .section-sub,
#why-bg .h2,
#why-bg .lead,
#why-bg .card strong, 
#why-bg .list li {
  color: var(--ink);
}

/* CTA Section Styles */
#cta {
  padding-inline: 1.5rem;
  padding-block: 3rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
}

#cta .h2 {
  text-align: center;
  font-size: var(--display-md-size);
  font-weight: var(--display-md-weight);
  line-height: var(--display-md-line-height);
  letter-spacing: var(--display-md-letter-spacing);
  color: var(--surface);
  margin: 0;
}

/* Mobile CTA Header */
@media (max-width: 768px) {
  #cta .h2 {
    font-size: var(--h2-size);
    line-height: 1.3;
  }
}

#cta .btn.primary {
  background-color: #002338;
  margin-top: 3rem;
  width: auto;
  min-width: 200px;
}

#cta .kicker {
  background-color: transparent;
  color: var(--highlight);
  border-color: var(--highlight);
  margin-bottom: 2rem;
  align-self: center;
}

#cta .lead {
  text-align: center;
  color: var(--surface);
  max-width: 400px;
}

/* Special text color overrides */
#headline {
  color: var(--ink);
}

#sub {
  color: var(--muted);
}

/* Wizard layout */

.shell {
  height: calc(100vh - 4px - var(--dock-h));
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: var(--bg);
}

.body {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden;
}

.content {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 40px;
}

.content-inner {
  max-width: 720px;
  margin: 0 auto;
  padding: var(--space-xl) var(--space-m);
  width: 100%;
  max-height: 100%;
  overflow: hidden;
}

/* App Bar */
.appbar {
  background: transparent;
  border-bottom: 0;
}

.appbar-inner {
  max-width: 866px;
  margin: 0 auto;
  padding: var(--space-s) var(--space-m);
  display: flex;
  align-items: center;
  gap: var(--space-m);
}

.app-title {
  font-weight: var(--h4-weight);
  font-size: var(--h4-size);
  color: var(--ink);
}

.app-meta {
  margin-left: auto;
  font-size: var(--caption-lg-size);
  color: var(--muted);
}

/* Bottom Bar */

.dock {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  background: #f2f2f2;
  border-top: 1px solid var(--line);
  z-index: 50;
}

.dock-inner {
  max-width: 866px;
  margin: 0 auto;
  padding: 12px var(--space-m);
  display: grid;
  grid-template-columns: 1fr auto;
  gap: var(--space-m);
  align-items: end;
}

@media (max-width: 640px) {
  .dock-inner {
    grid-template-columns: 1fr;
  }
}

/* Faq */

details {
  background: var(--navy);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius);
  padding: 10px 12px;
  color: var(--surface);
}

details + details {
  margin-top: 10px;
}

summary {
  cursor: pointer;
  font-weight: 700;
}

summary::marker {
  color: var(--highlight);
}

/* Modal */

.sheet-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  z-index: 40;
}

.sheet {
  position: fixed;
  left: 0;
  right: 0;
  bottom: -80vh;
  background: var(--navy);
  border-top: 2px solid var(--highlight);
  border-radius: 0px;
  box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.12);
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  transition: transform 0.25s ease;
  transform: translateY(100%);
  z-index: 50;
}

.sheet.open {
  transform: translateY(0);
}

.sheet-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid var(--line);
}

.sheet-title {
  font-weight: 800;
  color: var(--surface);
}

.sheet-body {
  padding: 14px 16px;
  overflow: auto;
  color: var(--surface);
}

.sheet-actions {
  display: flex;
  justify-content: flex-end;
  padding: 12px 16px;
  border-top: 1px solid var(--line);
}

.link {
  color: var(--highlight);
  text-decoration: underline;
  font-weight: 600;
}

/* Footer */

.site-footer {
  border-top: 1px solid var(--line);
  background: #fff;
}

.site-footer-inner {
  max-width: 866px;
  margin: 0 auto;
  padding: 20px 16px;
  color: var(--muted);
  font-size: var(--body-sm-size);
  font-weight: var(--body-sm-weight);
  line-height: var(--body-sm-line-height);
  letter-spacing: var(--body-sm-letter-spacing);
}

.site-footer .links {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 8px;
}

.site-footer a {
  color: var(--brand);
  text-decoration: underline;
}

/* Animations */

@media (prefers-reduced-motion: no-preference) {
  .fade-in {
    animation: fadeIn 0.20s ease both;
  }
  
  .fade-out {
    animation: fadeOut 0.16s ease both;
  }
  
  .slide-in-up {
    animation: slideInUp 0.22s cubic-bezier(0.2, 0.7, 0.2, 1) both;
  }
  
  .slide-out-down {
    animation: slideOutDown 0.18s cubic-bezier(0.2, 0.7, 0.2, 1) both;
  }
  
  .tap {
    transform: scale(0.98);
    transition: transform 0.06s;
  }
  
  .option:hover {
    transform: translateY(-1px);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes slideInUp {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideOutDown {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(6px); }
}
}
/* === SPA scaffolding === */
.page { display: none; }
.page.active { display: block; }
  </style>
</head>
<body>
  <!-- Global Header (from index.html) -->
  <header class="brandbar">
    <div class="brandbar-inner">
      <div class="brand-logo"><img src="assets/FiveStarTax_Logo_Transparent-white.png" alt="Five Star Tax" class="logo-img"></div>
      <nav class="brand-actions">
        <a class="header-btn" href="">(555) 247-1234</a>
      </nav>
    </div>
  </header>

  <!-- PAGE: Landing (from index.html) -->
  <section id="page-index" class="page active">
    
  <!-- Header -->
  

  <!-- Hero -->
   <div class="hero">
  <main class="hero-min" id="top">
    <span class="kicker-hero">Welcome</span>
    <h1 class="hero-title">Relief Starts Here.</h1>
    <p class="hero-sub">Partner with our tax professionals to begin your life free of tax burden.</p>
    <div class="hero-cta">
      <a class="btn primary" href="wizard.html">Get Qualified Today</a>

    </div>
    <div class="trust" style="margin-top:16px">
      <div class="chip">Licensed Professionals</div>
      <div class="chip">Secure & Confidential</div>
      <div class="chip">Mobile-Friendly</div>
    </div>
  </main>
  </div>

  <!-- Problem / Pain -->
  <section class="section" id="problem">
    <span class="kicker">We Can Help</span>
    <h2 class="h2">Dealing with IRS Collections or Back Taxes?</h2>
    <p class="lead">Whether you’re behind a year or several, we help reduce stress and move quickly toward a resolution.</p>
    <div class="grid cols-3" style="margin-top:2rem">
      <div class="card row">
        <div class="ic">
          <svg viewBox="0 0 24 24" fill="none"><path d="M4 6h16M4 12h16M4 18h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </div>
        <div class="callout-box">
          <strong>Notices & Letters</strong>
          <div class="section-sub" style="text-align:left">Received CP, intent-to-levy, or audit letters? We’ll review and explain options.</div>
        </div>
      </div>
      <div class="card row">
        <div class="ic">
          <svg viewBox="0 0 24 24" fill="none"><path d="M12 7v5l3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="2"/></svg>
        </div>
        <div>
          <strong>Years Behind</strong>
          <div class="section-sub" style="text-align:left">From 1 year to 7+, we’ll map a plan to file, settle, or set installments.</div>
        </div>
      </div>
      <div class="card row">
        <div class="ic">
          <svg viewBox="0 0 24 24" fill="none"><path d="M3 12l7 7 11-11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </div>
        <div>
          <strong>Liens & Garnishments</strong>
          <div class="section-sub" style="text-align:left">Address levies and wage garnishments and work toward relief.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Services / Programs -->
  <div class="full-width-bg" id="services-bg">
  <section class="section" id="services">
    <span class="kicker">Programs We Use</span>
    <h2 class="h2">Tax Resolution Options</h2>
    <p class="lead">Every situation is unique. We’ll evaluate your details and recommend the best path.</p>

    <div class="grid cols-4" style="margin-top:14px">
      <div class="card">
        <div class="row">
          <div class="ic">
            <svg viewBox="0 0 24 24" fill="none"><path d="M5 12h14M12 5v14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </div>
          <div>
            <strong>Offer in Compromise</strong>
            <div class="section-sub" style="text-align:left">Potentially settle taxes for less than you owe if you qualify.</div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="row">
          <div class="ic">
            <svg viewBox="0 0 24 24" fill="none"><path d="M4 6h16M8 12h12M12 18h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </div>
          <div>
            <strong>Installment Agreements</strong>
            <div class="section-sub" style="text-align:left">Spread payments over time to regain control of cash flow.</div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="row">
          <div class="ic">
            <svg viewBox="0 0 24 24" fill="none"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83" stroke="currentColor" stroke-width="2"/></svg>
          </div>
          <div>
            <strong>Penalty Abatement</strong>
            <div class="section-sub" style="text-align:left">Request reduction/removal of penalties where circumstances apply.</div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="row">
          <div class="ic">
            <svg viewBox="0 0 24 24" fill="none"><path d="M3 3h18v6H3zM3 15h18v6H3z" stroke="currentColor" stroke-width="2"/><path d="M7 6h10M7 18h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </div>
          <div>
            <strong>Currently Not Collectible</strong>
            <div class="section-sub" style="text-align:left">Pause enforced collections if finances qualify as hardship.</div>
          </div>
        </div>
      </div>
    </div>

    <div class="btn-wrapper" style="margin-top:16px">
      <a class="btn primary" href="wizard.html">See If You Qualify</a>
     
    </div>
  </section>
  </div>

  <!-- Process -->
  <section class="section" id="process">
    <span class="kicker">How It Works</span>
    <h2 class="h2">Simple, Fast, Professional</h2>
    <div class="grid cols-3" style="margin-top:14px">
      <div class="card row">
        <div class="ic">
          <svg viewBox="0 0 24 24" fill="none"><path d="M4 6h16M4 12h16M4 18h7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </div>
        <div>
          <strong>1) Free Assessment</strong>
          <div class="section-sub" style="text-align:left">Answer a few quick questions to help us understand your situation.</div>
        </div>
      </div>
      <div class="card row">
        <div class="ic">
          <svg viewBox="0 0 24 24" fill="none"><path d="M5 12l5 5L20 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </div>
        <div>
          <strong>2) Review Options</strong>
          <div class="section-sub" style="text-align:left">We confirm eligibility and walk you through relief paths and timelines.</div>
        </div>
      </div>
      <div class="card row">
        <div class="ic">
          <svg viewBox="0 0 24 24" fill="none"><path d="M12 19V5M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        </div>
        <div>
          <strong>3) Get Relief</strong>
          <div class="section-sub" style="text-align:left">We file, negotiate, and help you move forward confidently.</div>
        </div>
      </div>
    </div>
    <div class="btn-wrapper" style="margin-top:16px">
      <a class="btn primary" href="wizard.html">See If You Qualify</a>
    </div>
  </section>

  <!-- Credibility / Why Us -->
  <div class="full-width-bg" id="why-bg">
  <section class="section" id="why">
    <span class="kicker">Why Choose Us</span>
    <h2 class="h2">Licensed, Experienced, Results-Focused</h2>
    <p class="lead">We combine professional expertise with a modern client experience built for mobile.</p>
    <div class="grid cols-3" style="margin-top:14px">
      <div class="card">
        <strong>Licensed Professionals</strong>
        <ul class="list">
          <li>Tax attorneys, enrolled agents, and CPAs</li>
          <li>Ethical, compliant, and transparent</li>
        </ul>
      </div>
      <div class="card">
        <strong>Clear Communication</strong>
        <ul class="list">
          <li>Fast intake and next-step expectations</li>
          <li>Plain-English guidance</li>
        </ul>
      </div>
      <div class="card">
        <strong>Established Reputation</strong>
        <ul class="list">
          <li>Five star ratings on Google and Yelp</li>
          <li>30+ yeras of Tax Experience</li>
        </ul>
      </div>
    </div>
  </section>
  </div>

  <!-- FAQ -->
  <section class="section" id="faq">
    <span class="kicker">FAQ</span>
    <h2 class="h2">Answers to Common Questions</h2>
    <div style="margin-top:14px">
      <details>
        <summary>Will checking eligibility affect my credit?</summary>
        <div class="section-sub" style="text-align:left">No. This assessment is informational only and does not impact your credit.</div>
      </details>
      <details>
        <summary>What if I already have a lien or levy?</summary>
        <div class="section-sub" style="text-align:left">We’ll assess your options. In many cases, we can request relief, pause, or negotiate terms.</div>
      </details>
      <details>
        <summary>How long does the process take?</summary>
        <div class="section-sub" style="text-align:left">Initial assessment is quick. Resolution timelines vary based on your program and IRS processing.</div>
      </details>
      <details>
        <summary>Is my information secure?</summary>
        <div class="section-sub" style="text-align:left">Yes. We follow strict confidentiality and secure handling practices.</div>
      </details>
    </div>
  </section>

  <!-- Closing CTA -->
  <div class="full-width-bg" id="cta-bg">
  <section class="section" id="cta">
    <span class="kicker">Get Started</span>
    <h2 class="h2">See If You Qualify Today!</h2>
        <p class="lead">Whether you’re behind a year or several, we help reduce stress and move quickly toward a resolution.</p>
    <div class="hero-cta" style="margin-top:8px">
      <a class="btn primary" href="wizard.html">Get Started</a>
    </div>
  </section>
  </div>

  <!-- Footer -->
  
  <script>
    // Header scroll behavior
    window.addEventListener('scroll', function() {
      const header = document.querySelector('.brandbar');
      const hero = document.querySelector('.hero');
      
      if (hero) {
        const heroBottom = hero.offsetTop + hero.offsetHeight;
        const scrollPosition = window.scrollY + header.offsetHeight;
        
        if (scrollPosition >= heroBottom) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
      }
    });


  </script>

  </section>

  <!-- PAGE: Wizard (from wizard.html) -->
  <section id="page-wizard" class="page">
    
  

  <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
  
  <div class="shell">
    <div class="appbar">
      <div class="appbar-inner">
        <div class="app-meta"><span id="stepLabel">Step 1 of 5</span></div>
      </div>
    </div>

    <div class="body">
      <div class="content" id="content">
        <div class="content-inner">
          <div class="h1" id="qTitle">Let’s begin</div>
          <div class="section-sub" id="qSub">This takes about a minute. Your information is confidential.</div>
        </div>
      </div>
    </div>
  </div>

  <div class="dock" id="dock">
    <div class="dock-inner">
      <div id="controls"></div>
      <div style="display:flex;gap:8px">
        <button class="btn ghost" type="button" id="backBtn">Back</button>
        <button class="btn primary" type="button" id="nextBtn">Next</button>
      </div>
    </div>
  </div>

  <!-- Disclosures bottom sheet -->
  <div class="sheet-overlay" id="sheetOverlay"></div>
  <div class="sheet" id="sheet">
    <div class="sheet-header">
      <div class="sheet-title">Important Disclosures</div>
      <button class="btn ghost" id="closeSheet" type="button">Close</button>
    </div>
    <div class="sheet-body">
      <p><strong>This is a fake disclosure, sorry.</strong> This is not an offer to provide tax, legal, or financial advice. We are not affiliated with the U.S. Department of the Treasury or the Internal Revenue Service (IRS). Programs described may not be available in all states and are subject to qualification.</p>
      <p>Qualifi</p>
      <p><a href="#" class="link">Privacy</a> • <a href="#" class="link">Terms</a> • <a href="#" class="link">Do Not Sell or Share</a> • <a href="#" class="link">Contact</a></p>
    </div>
    <div class="sheet-actions">
      <button class="btn primary" id="ackSheet" type="button">I Understand</button>
    </div>
  </div>

  
  <script>
    // Dock height + iOS keyboard handling + bottom sheet
    (function(){
      const root = document.documentElement;
      const dock = document.getElementById('dock');
      function setDockHeight(){
        const h = dock.offsetHeight || 100;
        root.style.setProperty('--dock-h', h + 'px');
      }
      setDockHeight();
      window.addEventListener('resize', setDockHeight);
      new ResizeObserver(setDockHeight).observe(dock);
      if (window.visualViewport){
        visualViewport.addEventListener('resize', () => {
          const bottomInset = Math.max(0, (window.innerHeight - visualViewport.height - visualViewport.offsetTop));
          dock.style.transform = bottomInset ? 'translateY(-'+ bottomInset +'px)' : 'translateY(0)';
        });
      }
      const overlay = document.getElementById('sheetOverlay');
      const sheet = document.getElementById('sheet');
      function openSheet(){ overlay.style.opacity='1'; overlay.style.pointerEvents='auto'; sheet.classList.add('open'); }
      function closeSheet(){ overlay.style.opacity='0'; overlay.style.pointerEvents='none'; sheet.classList.remove('open'); }
      document.getElementById('openSheet').addEventListener('click', e=>{ e.preventDefault(); openSheet(); });
      document.getElementById('closeSheet').addEventListener('click', closeSheet);
      document.getElementById('ackSheet').addEventListener('click', closeSheet);
      overlay.addEventListener('click', closeSheet);
    })();
  </script>

  </section>

  <!-- PAGE: Thank You (from thank-you.html) -->
  <section id="page-thanks" class="page">
    
  

  <main class="hero-min">
    <h1 class="hero-title" id="headline">Thank you!</h1>
    <p class="hero-sub" id="sub">We’ve received your info and will be in touch shortly.</p>
    <section class="card" style="max-width:720px;margin:0 auto;background:#fff;border:1px solid var(--line);border-radius:var(--radius);padding:14px">
      <div id="summary" class="section-sub" style="text-align:left">Loading your details…</div>
    </section>
  </main>

  <script>
    const nameParam = new URLSearchParams(location.search).get('name');
    let lead = null;
    try{ lead = JSON.parse(localStorage.getItem('demo_lead')||'null'); }catch(e){}
    const headline = document.getElementById('headline');
    const sub = document.getElementById('sub');
    const summary = document.getElementById('summary');
    if(nameParam){ headline.textContent = `Thanks, ${nameParam}!`; sub.textContent = 'One of our tax specialists will reach out to you within 24hrs to schedule your free consultation.'; }
    if(lead){
      const items = [
        ['Amount Owed', lead.amount || '—'],
        ['Tax Type', lead.taxtype || '—'],
        ['Back Taxes', lead.years || '—'],
        ['State', lead.state || '—'],
        ['Name', lead.name || '—'],
        ['Email', lead.email || '—'],
        ['Phone', lead.phone || '—'],
        ['Contact Window', lead.contact || '—'],
        ['Consent', lead.terms ? 'Yes' : '—'],
        ['Submitted', lead.ts ? new Date(lead.ts).toLocaleString() : '—']
      ];
      summary.innerHTML = '<ul style="margin:0;padding-left:18px">' + items.map(([k,v]) => `<li><strong>${k}:</strong> ${v}</li>`).join('') + '</ul>';
    } else {
      summary.textContent = 'No details available (demo mode).';
    }
  </script>

  </section>

  <script>
// === Inlined wizard.js start ===

// v7m — Clean (no summary), progress bar, animations, option icons, phone mask + email validation
const STEPS = [
  { id:'amount',  type:'pills',   title:'How much tax debt do you owe?', sub:'Choose the closest range.', options:['< $10,000','$10,000–$25,000','$25,000–$50,000','$50,000+'], required:true },
  { id:'taxtype', type:'pills',   title:'Do you have any unfiled tax years?', sub:'Select one.', options:['No, I\'m current','1 year','2–3 years','4–5 years','5+ years'], required:true },
  { id:'years',   type:'pills',   title:'Do you owe Federal or State taxes?', sub:'Select the best match.', options:['Federal','State', 'Both'], required:true },
 
  { id:'contact', type:'contact', title:'Who are we helping today? We will reach out to schedule a consultation.', sub:'Enter your contact details', required:true }
];

const qTitle = document.getElementById('qTitle');
const qSub = document.getElementById('qSub');
const stepLabel = document.getElementById('stepLabel');
const nextBtn = document.getElementById('nextBtn');
const backBtn = document.getElementById('backBtn');
const controls = document.getElementById('controls');
const progressBar = document.getElementById('progressBar');

const params = new URLSearchParams(location.search);
const utm = params.toString()?('?'+params.toString()):'';



// Lead notification endpoints here - //
const GAS_WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbwfDJy9Lfk5sZQsA6ccMJOf2XTvcNAeoMHdb7JhKqHtKQ6cYMUkLnuKKZMVyehTS4Hd/exec'; 
const NOTIFY_EMAILS   = 'cameron@axesagency.com';                               

let step = 0;
const data = {};

function setProgress(i){
  stepLabel.textContent = `Step ${Math.min(i+1,STEPS.length)} of ${STEPS.length}`;
  const pct = Math.round((i)/ (STEPS.length-1) * 100);
  progressBar.style.width = Math.max(2, pct) + '%';
}

function iconFor(stepId){
  const icons = {
    amount:'<svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M12 3v18M7 7h6a3 3 0 0 1 0 6H9a3 3 0 1 0 0 6h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',
    taxtype:'<svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M4 6h16M4 12h16M4 18h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',
    years:'<svg class="icon" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="2"/><path d="M12 7v5l3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',
    state:'<svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M4 10l4-5h8l4 5-4 5H8l-4-5z" stroke="currentColor" stroke-width="2"/></svg>',
    contact:'<svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M22 16v3a2 2 0 0 1-2 2h-3c-7.18 0-13-5.82-13-13V3a2 2 0 0 1 2-2h3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>'
  };
  return icons[stepId] || '';
}

function animateSwap(container, build){
  const kids = Array.from(container.children);
  if(kids.length){ kids.forEach(k => k.classList.add('slide-out-down')); }
  setTimeout(()=>{
    container.innerHTML = '';
    build();
    Array.from(container.children).forEach(k => k.classList.add('slide-in-up'));
  }, kids.length ? 140 : 0);
}

function render(){
  const s = STEPS[step];
  setProgress(step);

  // question
  const content = document.querySelector('.content-inner');
  animateSwap(content, ()=>{
    const h = document.createElement('div'); h.className='h1'; h.id='qTitle'; h.textContent = s.title;
    const sub = document.createElement('div'); sub.className='section-sub'; sub.id='qSub'; sub.textContent = s.sub || '';
    content.appendChild(h); content.appendChild(sub);
  });

  // controls
  animateSwap(controls, ()=>{ buildControlsForStep(s); });

  backBtn.disabled = step===0;
  nextBtn.textContent = step===STEPS.length-1 ? 'Finish' : 'Next';
}

function buildControlsForStep(s){
  let el;
  if(s.type==='select'){
    el = document.createElement('select');
    el.className = 'select';
    el.innerHTML = '<option value="" disabled selected>Select…</option>' + (s.options||[]).map(o=>`<option>${o}</option>`).join('');
    if(data[s.id]) el.value = data[s.id];
    controls.appendChild(el);
  }
  else if(s.type==='pills'){
    el = document.createElement('div');
    el.className = 'options';
    (s.options||[]).forEach(opt=>{
      const item = document.createElement('button');
      item.type = 'button';
      item.className = 'option';
      item.innerHTML = `<span class="mark">✓</span><span class="label">${opt}</span>`;
      if(data[s.id]===opt) item.classList.add('active');
      item.addEventListener('mousedown', ()=> item.classList.add('tap'));
      item.addEventListener('mouseup', ()=> item.classList.remove('tap'));
      item.addEventListener('mouseleave', ()=> item.classList.remove('tap'));
      item.addEventListener('click', ()=>{
        el.querySelectorAll('.option').forEach(n=>n.classList.remove('active'));
        item.classList.add('active');
        advance(opt);
      });
      el.appendChild(item);
    });
    controls.appendChild(el);
  }
  else if(s.type==='contact'){
    buildContactStep();
  }
}

function buildContactStep(){
  const wrap = document.createElement('div');
  wrap.style.display='grid';
  wrap.style.gridTemplateColumns='1fr 1fr';
  wrap.style.gap='10px';
  wrap.className='grid2';

  const mkField = (id, node)=>{ node.dataset.id=id; node.classList.add('input'); return node; }
  const mkInput = (id, type, ph, val)=> mkField(id, Object.assign(document.createElement('input'), {type, placeholder:ph, value:val||''}));
  const mkSelect = (id, opts, label)=>{
    const sel = document.createElement('select'); sel.className='select'; sel.dataset.id=id;
    sel.innerHTML = `<option value="" disabled selected>${label}</option>` + opts.map(o=>`<option>${o}</option>`).join('');
    if(data[id]) sel.value = data[id];
    return sel;
  };

  const name = mkInput('name','text','Full name', data.name);
  const phone = mkInput('phone','tel','Phone (e.g. (555) 555‑5555)', data.phone);
  const email = mkInput('email','email','Email', data.email);
  const contactWin = mkSelect('contact',['Morning','Afternoon','Evening',],'Preferred contact window…');

  
  const digits = s=> (s||'').replace(/\D/g,'');
  const formatPhone = d => {
    const a=d.slice(0,3), b=d.slice(3,6), c=d.slice(6,10);
    if(d.length<=3) return a;
    if(d.length<=6) return `(${a}) ${b}`;
    return `(${a}) ${b}-${c}`;
  };
  function maskPhone(){ const d = digits(phone.value).slice(0,10); phone.value = formatPhone(d); }
  phone.addEventListener('input', maskPhone); phone.addEventListener('blur', maskPhone);

  // Email validation
  const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
  function setError(el, msg){
    el.classList.add('error');
    const e = document.createElement('div'); e.className='error-text'; e.textContent=msg;
    el.parentNode && el.parentNode.appendChild(e);
  }
  function clearError(el){
    el.classList.remove('error');
    if(el.parentNode){ const n = el.parentNode.querySelector('.error-text'); if(n) n.remove(); }
  }
  function validateEmailInstant(){
    clearError(email);
    if(email.value && !emailRe.test(email.value)){ setError(email,'Please enter a valid email address.'); }
  }
  email.addEventListener('blur', validateEmailInstant);

  // Consent
  const consent = document.createElement('label');
  consent.style.display='flex'; consent.style.alignItems='center'; consent.style.gap='10px'; consent.style.gridColumn='1 / -1';
  const cb = document.createElement('input'); cb.type='checkbox'; cb.checked=!!data.terms; cb.dataset.id='terms';
  consent.appendChild(cb);
  consent.appendChild(document.createTextNode('By checking this box I agree that I am a US Resident over the age 18 and agree to the Privacy Policy.'));

  // Layout
  const cell = (node, full=false)=>{ const c = document.createElement('div'); if(full) c.style.gridColumn='1 / -1'; c.appendChild(node); return c; };
  wrap.appendChild(cell(name));
  wrap.appendChild(cell(phone));
  wrap.appendChild(cell(email, true));
  wrap.appendChild(cell(contactWin, true));
  wrap.appendChild(cell(consent, true));
  controls.appendChild(wrap);

  // Submit/validate on Next
  nextBtn.onclick = function(){
    [name, phone, email, contactWin].forEach(clearError);
    let ok = true;

    if(!name.value.trim()){ setError(name,'Name is required.'); ok=false; }
    const d = digits(phone.value);
    if(d.length<10){ setError(phone,'Enter a 10‑digit US phone.'); ok=false; } else { phone.value = formatPhone(d); }
    if(!email.value.trim() || !emailRe.test(email.value)){ setError(email,'Please enter a valid email address.'); ok=false; }
    if(!contactWin.value){ setError(contactWin,'Please select a preferred contact window.'); ok=false; }
    if(!cb.checked){
      if(!consent.querySelector('.error-text')){ const e = document.createElement('div'); e.className='error-text'; e.textContent='Consent is required to continue.'; consent.appendChild(e); }
      ok=false;
    } else { const e = consent.querySelector('.error-text'); if(e) e.remove(); }

    if(!ok){
      const sub = document.getElementById('qSub');
      sub.textContent = 'Please fix the highlighted fields to continue.';
      sub.style.color = '#b91c1c';
      setTimeout(()=>{ sub.style.color='var(--muted)'; sub.textContent = STEPS[step].sub || ''; }, 1600);
      return;
    }

    data.name = name.value.trim();
    data.phone = formatPhone(digits(phone.value));
    data.email = email.value.trim();
    data.contact = contactWin.value;
    data.terms = cb.checked;
    step++;
    if(step<STEPS.length){ render(); } else { submit(); }
  };

  backBtn.onclick = back;
  email.addEventListener('keydown', e=>{ if(e.key==='Enter'){ nextBtn.click(); }});
}

function back(){ if(step===0) return; step--; render(); }

function nextDefault(){
  const s = STEPS[step];
  if(s.type==='select'){
    const v = controls.querySelector('select').value;
    return advance(v);
  }
  if(s.type==='pills'){
    const lab = controls.querySelector('.option.active .label');
    const v = lab ? lab.textContent : '';
    return advance(v);
  }
}

nextBtn.onclick = nextDefault;
backBtn.onclick = back;

function advance(value){
  const s = STEPS[step];
  if(s.required && (!value || value.length===0)){
    const sub = document.getElementById('qSub');
    sub.textContent = 'Please provide an answer to continue.';
    sub.style.color = '#b91c1c';
    setTimeout(()=>{ sub.style.color='var(--muted)'; sub.textContent = s.sub || ''; }, 1000);
    return;
  }
  data[s.id] = value;
  step++;
  if(step<STEPS.length){ render(); }
  else { submit(); }
}


// 
async function postToGoogle(payload){
  if(!GAS_WEB_APP_URL || GAS_WEB_APP_URL.indexOf('script.google.com') === -1){
    console.warn('GAS_WEB_APP_URL not set; skipping network post.');
    return;
  }
  const controller = new AbortController();
  const timer = setTimeout(() => controller.abort(), 1500); 
  try {
    const url = GAS_WEB_APP_URL + `?ua=${encodeURIComponent(navigator.userAgent)}&ref=${encodeURIComponent(document.referrer)}`;
    await fetch(url, {
      method: 'POST',
     
      headers: { 'Content-Type': 'text/plain' },
      body: JSON.stringify({ ...payload, notify: NOTIFY_EMAILS }),
      signal: controller.signal
    });
  } catch (e) {
    console.warn('Post to GAS failed (continuing to TY):', e);
  } finally {
    clearTimeout(timer);
  }
}

// Submit Function - redirects and posts on submit here
function submit(){
 
  const payload = { ...data, ts: new Date().toISOString() };


  postToGoogle(payload);

  // Demo
  try { localStorage.setItem('demo_lead', JSON.stringify(payload)); } catch(_) {}

  // redirect 
  const qp = new URLSearchParams({ name: data.name || 'Friend' });
  const utm = params && params.toString() ? '&' + params.toString() : '';
  location.href = 'thank-you.html?' + qp.toString() + utm;
}

render();

// === Inlined wizard.js end ===

// === SPA Controller Overrides ===
(function() {
  function showPage(id) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    const el = document.getElementById('page-' + id);
    if (el) el.classList.add('active');
    // Scroll to top on page switch
    window.scrollTo({ top: 0, behavior: ('instant' in window) ? 'instant' : 'auto' });
  }
  window.__spaShowPage = showPage;

  // Wire CTA buttons on the landing page to open the wizard
  document.querySelectorAll('a[href$="wizard.html"], a[href*="#start"], a.btn.primary').forEach(a => {
    a.addEventListener('click', function(e) {
      const href = (this.getAttribute('href')||'').trim();
      if (!href || href === '#' || href.indexOf('wizard.html') !== -1) {
        e.preventDefault();
        showPage('wizard');
        try { if (typeof render === 'function') render(); } catch(e) { /* ignore */ }
      }
    });
  });

  function populateThanks(payload) {
    try { localStorage.setItem('demo_lead', JSON.stringify(payload)); } catch(e) {}
    const nameParam = payload && payload.name ? payload.name : "";
    const headline = document.getElementById('headline');
    const sub = document.getElementById('sub');
    const summary = document.getElementById('summary');
    if (headline) headline.textContent = nameParam ? `Thanks, ${nameParam}!` : 'Thank you!';
    if (sub) sub.textContent = 'One of our tax specialists will reach out to you within 24hrs to schedule your free consultation.';
    if (summary) {
      const items = [
        ['Amount Owed', payload.amount || '—'],
        ['Tax Type', payload.taxtype || '—'],
        ['Back Taxes', payload.years || '—'],
        ['State', payload.state || '—'],
        ['Name', payload.name || '—'],
        ['Email', payload.email || '—'],
        ['Phone', payload.phone || '—'],
        ['Contact Window', payload.contact || '—'],
        ['Consent', payload.terms ? 'Yes' : '—'],
        ['Submitted', payload.ts ? new Date(payload.ts).toLocaleString() : '—']
      ];
      summary.innerHTML = '<ul style="margin:0;padding-left:18px">' + items.map(([k,v]) => `<li><strong>${k}:</strong> ${v}</li>`).join('') + '</ul>';
    }
  }

  // Override the wizard's submit to stay in SPA
  const _origSubmit = (typeof submit === 'function') ? submit : null;
  window.submit = function() {
    try {
      const payload = Object.assign({}, (typeof data !== 'undefined' ? data : {}), { ts: new Date().toISOString() });
      if (typeof postToGoogle === 'function') postToGoogle(payload);
      showPage('thanks');
      populateThanks(payload);
    } catch (e) {
      console.warn('SPA submit override failed, falling back:', e);
      if (_origSubmit) return _origSubmit();
    }
  };

  // Hash routing support
  const route = (location.hash||'').replace('#','');
  if (route === 'wizard') {
    showPage('wizard');
    try { if (typeof render === 'function') render(); } catch(e) {}
  } else if (route === 'thanks') {
    showPage('thanks');
  } else {
    showPage('index');
  }
})();
  </script>
</body>
</html>
